doctype html
html
  head
    meta(charset='utf-8')
    link(rel='stylesheet', href="../styles/css/vendor.css")
    link(rel='stylesheet', href="../styles/css/main.css")
    script(type='text/javascript', src="../styles/js/vendor.js")
    title player-electron
  body
    canvas#canvas
    div#debug
    script(type="text/javascript").
      var query = window.location.search.substring( 1 );
      var params = {};
      query.split('&').forEach(function(s){
        var element = s.split( '=' );
        var key = decodeURIComponent( element[ 0 ] );
        var value = decodeURIComponent( element[ 1 ] );
        if(value){
          params[key] = value;
        }else{
          params[key] = true;
        }
      });
      console.log("params", params);
      var wcjs = require('wcjs-prebuilt');
      window.vlcPlayer = wcjs.createPlayer(["-vvv"]);
      console.log("vlcPlayer", vlcPlayer);

      var renderContext = require("webgl-video-renderer").setupCanvas("canvas");
      console.log(renderContext);

      vlcPlayer.onFrameReady = function(frame){
        renderContext.render(frame, frame.width, frame.height, frame.uOffset, frame.vOffset);
      };
      if (params.url){
        console.log("play:", params.url);
        //vlcPlayer.play("http://archive.org/download/CartoonClassics/Krazy_Kat_-_Keeping_Up_With_Krazy.mp4");
        vlcPlayer.play(params.url);
      }
